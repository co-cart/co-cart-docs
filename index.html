
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>CoCart Documentation v1</title>

    <link rel="icon" href="images/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" href="images/favicon-192x192.png" sizes="192x192" />
    <link rel="apple-touch-icon-precomposed" href="images/favicon-180x180.png" />
    <meta name="msapplication-TileImage" content="images/favicon-270x270.png" />

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="php">PHP</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#requirements" class="toc-h2 toc-link" data-title="Requirements">Requirements</a>
                  </li>
                  <li>
                    <a href="#request-response-format" class="toc-h2 toc-link" data-title="Request/Response Format">Request/Response Format</a>
                  </li>
                  <li>
                    <a href="#errors" class="toc-h2 toc-link" data-title="Errors">Errors</a>
                  </li>
                  <li>
                    <a href="#parameters" class="toc-h2 toc-link" data-title="Parameters">Parameters</a>
                  </li>
                  <li>
                    <a href="#tools" class="toc-h2 toc-link" data-title="Tools">Tools</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#error-responses" class="toc-h1 toc-link" data-title="Error Responses">Error Responses</a>
          </li>
          <li>
            <a href="#cart" class="toc-h1 toc-link" data-title="Cart">Cart</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-cart-contents" class="toc-h2 toc-link" data-title="Get Cart Contents">Get Cart Contents</a>
                  </li>
                  <li>
                    <a href="#get-customers-cart-contents" class="toc-h2 toc-link" data-title="Get Customers Cart Contents">Get Customers Cart Contents</a>
                  </li>
                  <li>
                    <a href="#clear-cart" class="toc-h2 toc-link" data-title="Clear Cart">Clear Cart</a>
                  </li>
                  <li>
                    <a href="#count-items" class="toc-h2 toc-link" data-title="Count Items">Count Items</a>
                  </li>
                  <li>
                    <a href="#calculate-cart-totals" class="toc-h2 toc-link" data-title="Calculate Cart Totals">Calculate Cart Totals</a>
                  </li>
                  <li>
                    <a href="#get-cart-totals" class="toc-h2 toc-link" data-title="Get Cart Totals">Get Cart Totals</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#items" class="toc-h1 toc-link" data-title="Items">Items</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#add-item-to-cart" class="toc-h2 toc-link" data-title="Add Item to Cart">Add Item to Cart</a>
                  </li>
                  <li>
                    <a href="#remove-item-from-cart" class="toc-h2 toc-link" data-title="Remove Item from Cart">Remove Item from Cart</a>
                  </li>
                  <li>
                    <a href="#restore-item-to-cart" class="toc-h2 toc-link" data-title="Restore Item to Cart">Restore Item to Cart</a>
                  </li>
                  <li>
                    <a href="#update-item-in-cart" class="toc-h2 toc-link" data-title="Update Item in Cart">Update Item in Cart</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#hooks" class="toc-h1 toc-link" data-title="Hooks">Hooks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-cart" class="toc-h2 toc-link" data-title="Get Cart">Get Cart</a>
                  </li>
                  <li>
                    <a href="#clear-cart" class="toc-h2 toc-link" data-title="Clear Cart">Clear Cart</a>
                  </li>
                  <li>
                    <a href="#item-added" class="toc-h2 toc-link" data-title="Item Added">Item Added</a>
                  </li>
                  <li>
                    <a href="#item-removed" class="toc-h2 toc-link" data-title="Item Removed">Item Removed</a>
                  </li>
                  <li>
                    <a href="#item-restored" class="toc-h2 toc-link" data-title="Item Restored">Item Restored</a>
                  </li>
                  <li>
                    <a href="#item-quantity-changed" class="toc-h2 toc-link" data-title="Item Quantity Changed">Item Quantity Changed</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#filters" class="toc-h1 toc-link" data-title="Filters">Filters</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#change-thumbnail-size" class="toc-h2 toc-link" data-title="Change thumbnail size">Change thumbnail size</a>
                  </li>
                  <li>
                    <a href="#return-more-item-details" class="toc-h2 toc-link" data-title="Return more item details">Return more item details</a>
                  </li>
                  <li>
                    <a href="#ok-to-add-item" class="toc-h2 toc-link" data-title="OK to add item?">OK to add item?</a>
                  </li>
                  <li>
                    <a href="#return-cart-contents" class="toc-h2 toc-link" data-title="Return cart contents">Return cart contents</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#changelog" class="toc-h1 toc-link" data-title="Changelog">Changelog</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#doc-version-1-plugin-release-v2" class="toc-h2 toc-link" data-title="Doc Version 1 - Plugin Release v2">Doc Version 1 - Plugin Release v2</a>
                  </li>
                  <li>
                    <a href="#doc-version-0-5" class="toc-h2 toc-link" data-title="Doc Version 0.5">Doc Version 0.5</a>
                  </li>
                  <li>
                    <a href="#doc-version-0-4-plugin-release-1-0-5" class="toc-h2 toc-link" data-title="Doc Version 0.4 - Plugin Release 1.0.5">Doc Version 0.4 - Plugin Release 1.0.5</a>
                  </li>
                  <li>
                    <a href="#doc-version-0-3-plugin-release-1-0-4" class="toc-h2 toc-link" data-title="Doc Version 0.3 - Plugin Release 1.0.4">Doc Version 0.3 - Plugin Release 1.0.4</a>
                  </li>
                  <li>
                    <a href="#doc-version-0-2-plugin-release-1-0-1" class="toc-h2 toc-link" data-title="Doc Version 0.2 - Plugin Release 1.0.1">Doc Version 0.2 - Plugin Release 1.0.1</a>
                  </li>
                  <li>
                    <a href="#doc-version-0-1-plugin-release-1-0-0" class="toc-h2 toc-link" data-title="Doc Version 0.1 - Plugin Release 1.0.0">Doc Version 0.1 - Plugin Release 1.0.0</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#contribute" class="toc-h1 toc-link" data-title="Contribute">Contribute</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href="https://github.com/co-cart/co-cart">CoCart Repository</a></li>
            <li><a href="https://github.com/co-cart/co-cart/issues?page=1&amp;state=open">CoCart Issues</a></li>
            <li><a href="https://github.com/co-cart/co-cart/blob/master/CONTRIBUTING.md">Contribute to CoCart</a></li>
            <li><a href="https://github.com/co-cart/co-cart-docs/blob/master/CONTRIBUTING.md">Contribute to Documentation</a></li>
            <li><a href="http://woocommerce.github.io/woocommerce-rest-api-docs/">WooCommerce REST API Docs</a></li>
            <li><a href="https://sebastiendumont.com">Developed by Sébastien Dumont</a></li>
            <li><a href="https://github.com/lord/slate">Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>CoCart allows the cart to be created, read, updated, and deleted using requests in JSON format and using WordPress REST API Authentication methods and standard HTTP verbs which are understood by most HTTP clients.</p>

<p>The current WP REST API integration version is <code>v1</code> which takes a first-order position in endpoints.</p>

<p>The following table shows API versions present in each major version of CoCart:</p>

<table><thead>
<tr>
<th>API Version</th>
<th>CoCart Version</th>
<th>WC Version</th>
<th>WP Version</th>
</tr>
</thead><tbody>
<tr>
<td><code>v1</code></td>
<td>1.0.x or later</td>
<td>3.6.x or later</td>
<td>4.4 or later</td>
</tr>
</tbody></table>

<p>Prior to WooCommerce v3.6, CoCart shared WooCommerce&#39;s REST API. You can find the documentation about cart support for <code>/wc-api-v2</code> API separately.</p>

<table><thead>
<tr>
<th>API Version</th>
<th>WC Version</th>
<th>WP Version</th>
<th>Documentation</th>
</tr>
</thead><tbody>
<tr>
<td><code>wc-api-v2</code></td>
<td>3.0.x or later</td>
<td>4.4 or later</td>
<td><a href="wc-api-v2.html">wc-api-v2 docs</a></td>
</tr>
</tbody></table>
<h2 id='requirements'>Requirements</h2>
<p>To use the latest version of the CoCart you must be using:</p>

<ul>
<li>WordPress 4.4 or later.</li>
<li>WooCommerce 3.6.x or later.</li>
<li>Pretty permalinks in <code>Settings &gt; Permalinks</code> so that the custom endpoints are supported. <strong>Default permalinks will not work.</strong></li>
<li>You may make requests over either HTTP or HTTPS, but HTTPS is recommended where possible.</li>
</ul>

<aside class="notice">
  Please note that you are <strong>not</strong> required to install the <a href="https://wordpress.org/plugins/rest-api/">WP REST API (WP API)</a> plugin.
</aside>
<h2 id='request-response-format'>Request/Response Format</h2>
<p>The default response format is JSON. Requests with a message-body use plain JSON to set or update resource attributes. Successful requests will return a <code>200 OK</code> HTTP status.</p>

<p>Some general information about response:</p>

<ul>
<li>Resource IDs are returned as integers.</li>
<li>Other amounts, such as item counts, are returned as integers.</li>
<li>Blank fields are generally included as <code>null</code> instead of being returned as blank strings or omitted.</li>
</ul>
<h2 id='errors'>Errors</h2>
<p>Occasionally you might encounter errors when accessing the REST API. There are four possible types:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Error Type</th>
</tr>
</thead><tbody>
<tr>
<td><code>400 Bad Request</code></td>
<td>Invalid request, e.g. using an unsupported HTTP method</td>
</tr>
<tr>
<td><code>401 Unauthorized</code></td>
<td>Authentication or permission error, e.g. incorrect API keys</td>
</tr>
<tr>
<td><code>404 Not Found</code></td>
<td>Requests to resources that don&#39;t exist or are missing</td>
</tr>
<tr>
<td><code>500 Internal Server Error</code></td>
<td>Server error</td>
</tr>
</tbody></table>

<blockquote>
<p>WP REST API error example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rest_no_route"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No route was found matching the URL and request method"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>CoCart error example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cocart_clear_cart_failed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Clearing the cart failed!"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Errors return both an appropriate HTTP status code and response object which contains a <code>code</code>, <code>message</code> and <code>data</code> attribute.</p>
<h2 id='parameters'>Parameters</h2>
<p>Almost all endpoints accept optional parameters which can be passed as a HTTP query string parameter, e.g. <code>POST /cocart/v1/item?cart_item_key=270edd69788dce200a3b395a6da6fdb7&amp;quantity=2</code>. All parameters are documented along each endpoint.</p>
<h2 id='tools'>Tools</h2>
<p>Some useful tools you can use to access the API include:</p>

<ul>
<li><a href="https://www.getpostman.com/">Postman</a> - A multi platform REST API GUI client (using Google Chrome or installing the app on Mac OS X or Windows).</li>
<li><a href="https://insomnia.rest/">Insomnia</a> - Similar to Postman using an app on Mac OS X, Windows or Ubuntu.</li>
<li><a href="http://mmattozzi.github.io/cocoa-rest-client/">CocoaRestClient</a> - A Mac OS X GUI client for interacting with the API.</li>
<li><a href="https://itunes.apple.com/us/app/paw-http-client/id584653203?mt=12">Paw HTTP Client</a> - Another HTTP client for Mac OS X.</li>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/restclient/">RESTClient, a debugger for RESTful web services</a> - Free Firefox add-on.</li>
<li><a href="https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo">Advanced REST client</a> - Free Google Chrome extension.</li>
<li><a href="https://hookbin.com/">Hookbin</a> - Another tool to test web hooks.</li>
</ul>
<h1 id='error-responses'>Error Responses</h1>
<p>You might encounter an error when using CoCart. These error responses explain what might have happened.</p>

<table><thead>
<tr>
<th>Error Status</th>
<th>Error Response</th>
</tr>
</thead><tbody>
<tr>
<td><code>cocart_cannot_read_cart</code></td>
<td>Cannot read cart!</td>
</tr>
<tr>
<td><code>cocart_customer_missing</code></td>
<td>Customer ID is required!</td>
</tr>
<tr>
<td><code>cocart_clear_cart_failed</code></td>
<td>Clearing the cart failed!</td>
</tr>
<tr>
<td><code>cocart_product_id_required</code></td>
<td>Product ID number is required!</td>
</tr>
<tr>
<td><code>cocart_product_id_not_numeric</code></td>
<td>Product ID must be numeric!</td>
</tr>
<tr>
<td><code>cocart_quantity_not_numeric</code></td>
<td>Quantity must be numeric!</td>
</tr>
<tr>
<td><code>cocart_product_does_not_exist</code></td>
<td>Warning: This product does not exist!</td>
</tr>
<tr>
<td><code>cocart_product_sold_individually</code></td>
<td>You cannot add another &quot;%s&quot; to your cart. <i class="label label-info">%s is the product name</i></td>
</tr>
<tr>
<td><code>cocart_cannot_be_purchased</code></td>
<td>Sorry, this product cannot be purchased.</td>
</tr>
<tr>
<td><code>cocart_product_out_of_stock</code></td>
<td>You cannot add &quot;%s&quot; to the cart because the product is out of stock. <i class="label label-info">%s is the product name</i></td>
</tr>
<tr>
<td><code>cocart_not_enough_in_stock</code></td>
<td>You cannot add that amount of &quot;%1$s&quot; to the cart because there is not enough stock (%2$s remaining). <i class="label label-info">%1$s is the product name. %2$s is the stock remaining.</i></td>
</tr>
<tr>
<td><code>cocart_not_enough_stock_remaining</code></td>
<td>You cannot add that amount to the cart &mdash; we have %1$s in stock and you already have %2$s in your cart.</td>
</tr>
<tr>
<td><code>cocart_cannot_add_to_cart</code></td>
<td>You cannot add &quot;%s&quot; to your cart. <i class="label label-info">%s is the product name</i></td>
</tr>
<tr>
<td><code>cocart_can_not_remove_item</code></td>
<td>Unable to remove item from cart.</td>
</tr>
<tr>
<td><code>cocart_can_not_restore_item</code></td>
<td>Unable to restore item to the cart.</td>
</tr>
<tr>
<td><code>cocart_can_not_update_item</code></td>
<td>Unable to update item quantity in cart.</td>
</tr>
<tr>
<td><code>cocart_cart_item_key_required</code></td>
<td>Cart item key is required!</td>
</tr>
</tbody></table>
<h1 id='cart'>Cart</h1>
<p>The cart API is powerful and allows you to view the cart in session, add new items, update the quantity of an item and delete individual items from the cart.</p>

<p>Using the individual endpoints and their properties, you can control what you need and what is returned when the request is finished.</p>
<h2 id='get-cart-contents'>Get Cart Contents</h2>
<p>This API returns the contents of the cart from a logged in customer or guest.</p>
<h3 id='properties'>Properties</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>integer</td>
<td>Unique identifier for the customer. <i class="label label-info">read-only</i></td>
</tr>
<tr>
<td><code>thumb</code></td>
<td>bool</td>
<td>Set as true to return the product thumbnail for the item.</td>
</tr>
</tbody></table>
<h3 id='http-request'>HTTP request</h3>
<div class="api-endpoint">
  <div class="endpoint-data">
    <i class="label label-get">GET</i>
    <h6>/wp-json/cocart/v1/get-cart</h6>
  </div>
</div>
<pre class="highlight shell tab-shell"><code>curl -X GET https://example.com/wp-json/cocart/v1/get-cart <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>JSON response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"19ca14e7ea6328a42e0eb13d585e4c22"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"key"</span><span class="p">:</span><span class="s2">"19ca14e7ea6328a42e0eb13d585e4c22"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product_id"</span><span class="p">:</span><span class="mi">36</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variation_id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variation"</span><span class="p">:[],</span><span class="w">
    </span><span class="s2">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data_hash"</span><span class="p">:</span><span class="s2">"b5c1d5ca8bae6d4896cf1807cdf763f0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_tax_data"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"subtotal"</span><span class="p">:[],</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"line_subtotal"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_subtotal_tax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_total"</span><span class="p">:</span><span class="mf">14.4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_tax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{},</span><span class="w">
    </span><span class="s2">"product_name"</span><span class="p">:</span><span class="s2">"Vneck Tshirt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product_title"</span><span class="p">:</span><span class="s2">"Vneck Tshirt"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -X GET https://example.com/wp-json/cocart/v1/get-cart <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "thumb": true
  }'</span>
</code></pre>
<blockquote>
<p>JSON response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"19ca14e7ea6328a42e0eb13d585e4c22"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"key"</span><span class="p">:</span><span class="s2">"19ca14e7ea6328a42e0eb13d585e4c22"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product_id"</span><span class="p">:</span><span class="mi">36</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variation_id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variation"</span><span class="p">:[],</span><span class="w">
    </span><span class="s2">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data_hash"</span><span class="p">:</span><span class="s2">"b5c1d5ca8bae6d4896cf1807cdf763f0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_tax_data"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"subtotal"</span><span class="p">:[],</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"line_subtotal"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_subtotal_tax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_total"</span><span class="p">:</span><span class="mf">14.4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_tax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{},</span><span class="w">
    </span><span class="s2">"product_name"</span><span class="p">:</span><span class="s2">"Vneck Tshirt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product_title"</span><span class="p">:</span><span class="s2">"Vneck Tshirt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product_image"</span><span class="p">:</span><span class="s2">"http:</span><span class="se">\/\/</span><span class="s2">yourdomain.xyz</span><span class="se">\/</span><span class="s2">wp-content</span><span class="se">\/</span><span class="s2">uploads</span><span class="se">\/</span><span class="s2">2019</span><span class="se">\/</span><span class="s2">06</span><span class="se">\/</span><span class="s2">vneck-tee.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='get-customers-cart-contents'>Get Customers Cart Contents</h2>
<p>This API returns the cart contents for a specific registered customer. To use this you must <a href="https://developer.wordpress.org/rest-api/using-the-rest-api/authentication/">authenticate</a>. You can also use the <a href="#get-cart-contents">Get Cart Content</a> properties.</p>

<aside class="notice">
  Please note that to return a registered customer, you must have persistent cart left enabled in you WooCommerce store for this to work and will only return if it has not expired or is still in session.
</aside>
<h3 id='http-request-2'>HTTP request</h3>
<div class="api-endpoint">
  <div class="endpoint-data">
    <i class="label label-get">GET</i>
    <h6>/wp-json/cocart/v1/get-cart/&lt;id&gt;</h6>
  </div>
</div>
<pre class="highlight shell tab-shell"><code>curl -X GET https://example.com/wp-json/cocart/v1/get-cart/123 <span class="se">\</span>
  -u consumer_key:consumer_secret <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>JSON returns the same responses as the examples above.</p>
</blockquote>
<h2 id='clear-cart'>Clear Cart</h2>
<p>This API helps you clear the contents of the cart.</p>
<h3 id='http-request'>HTTP request</h3>
<div class="api-endpoint">
  <div class="endpoint-data">
    <i class="label label-post">POST</i>
    <h6>/wp-json/cocart/v1/clear</h6>
  </div>
</div>

<aside class="notice">
It is important that you use POST and not GET as it will cache and return with a false response.
</aside>
<pre class="highlight shell tab-shell"><code>curl -X POST https://example.com/wp-json/cocart/v1/clear <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>JSON response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">"Cart is cleared."</span><span class="w">
</span></code></pre><h2 id='count-items'>Count Items</h2>
<p>This API helps you count the items in the cart.</p>
<h3 id='http-request'>HTTP request</h3>
<div class="api-endpoint">
  <div class="endpoint-data">
    <i class="label label-get">GET</i>
    <h6>/wp-json/cocart/v1/count-items</h6>
  </div>
</div>
<pre class="highlight shell tab-shell"><code>curl -X GET https://example.com/wp-json/cocart/v1/count-items <span class="se">\</span>
 -H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>JSON response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mi">1</span><span class="w">
</span></code></pre><h2 id='calculate-cart-totals'>Calculate Cart Totals</h2>
<p>This API helps you calculate the cart totals. You can also request to return the totals once calculated to reduce API requests and use the <a href="#get-cart-totals">Get Cart Totals</a> properties.</p>
<h3 id='properties'>Properties</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>return</code></td>
<td>bool</td>
<td>Set as true to return the totals once calculated. <i class="label label-info">optional</i></td>
</tr>
</tbody></table>
<h3 id='http-request'>HTTP request</h3>
<div class="api-endpoint">
    <div class="endpoint-data">
        <i class="label label-post">POST</i>
        <h6>/wp-json/cocart/v1/calculate</h6>
    </div>
</div>
<pre class="highlight shell tab-shell"><code>curl -X POST https://example.com/wp-json/cocart/v1/calculate <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>JSON response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">"Cart totals have been calculated."</span><span class="w">
</span></code></pre><h2 id='get-cart-totals'>Get Cart Totals</h2>
<p>This API helps you get the cart totals. You can also return the totals pre-formatted to save you time applying the currency symbol.</p>
<h3 id='properties'>Properties</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>html</code></td>
<td>bool</td>
<td>Set as true to return the totals as strings with currency symbol. <i class="label label-info">optional</i></td>
</tr>
</tbody></table>
<h3 id='http-request'>HTTP request</h3>
<div class="api-endpoint">
  <div class="endpoint-data">
    <i class="label label-get">GET</i>
    <h6>/wp-json/cocart/v1/totals</h6>
  </div>
</div>
<pre class="highlight shell tab-shell"><code>curl -X GET https://example.com/wp-json/cocart/v1/totals <span class="se">\</span>
 -H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>JSON response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"subtotal"</span><span class="p">:</span><span class="s2">"123.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subtotal_tax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping_total"</span><span class="p">:</span><span class="s2">"33.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping_tax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping_taxes"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"discount_total"</span><span class="p">:</span><span class="mf">24.6</span><span class="p">,</span><span class="w">
  </span><span class="s2">"discount_tax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cart_contents_total"</span><span class="p">:</span><span class="s2">"98.40"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cart_contents_tax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cart_contents_taxes"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"fee_total"</span><span class="p">:</span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_tax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_taxes"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"total"</span><span class="p">:</span><span class="s2">"131.40"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_tax"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -X GET https://example.com/wp-json/cocart/v1/totals <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "html": true
  }'</span>
</code></pre>
<blockquote>
<p>JSON response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"subtotal"</span><span class="p">:</span><span class="s2">"£123.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subtotal_tax"</span><span class="p">:</span><span class="s2">"£0.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping_total"</span><span class="p">:</span><span class="s2">"£33.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping_tax"</span><span class="p">:</span><span class="s2">"£0.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping_taxes"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"discount_total"</span><span class="p">:</span><span class="s2">"£24.60"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"discount_tax"</span><span class="p">:</span><span class="s2">"£0.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cart_contents_total"</span><span class="p">:</span><span class="s2">"£98.40"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cart_contents_tax"</span><span class="p">:</span><span class="s2">"£0.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cart_contents_taxes"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"fee_total"</span><span class="p">:</span><span class="s2">"£0.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_tax"</span><span class="p">:</span><span class="s2">"£0.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee_taxes"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"total"</span><span class="p">:</span><span class="s2">"£131.40"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_tax"</span><span class="p">:</span><span class="s2">"£0.00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h1 id='items'>Items</h1>
<p>The most important part of CoCart is adding items to the cart.</p>

<p>Once items are in the cart, customers always make decisions on which items they want to buy now, change the quantities of a particular item and which items they should remove.</p>

<p>The following API&#39;s help with all of that.</p>
<h2 id='add-item-to-cart'>Add Item to Cart</h2>
<p>This API helps you to add an item to the cart. You can also request to return the whole cart once item is added to reduce API requests and use the <a href="#get-cart-contents">Get Cart Content</a> properties.</p>
<h3 id='properties'>Properties</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>product_id</code></td>
<td>integer</td>
<td>The product ID is required in order to add a product to the cart. <i class="label label-info">mandatory</i></td>
</tr>
<tr>
<td><code>quantity</code></td>
<td>integer</td>
<td>Set the quantity of the product you want to add to the cart. <i class="label label-info">Default is 1</i></td>
</tr>
<tr>
<td><code>variation_id</code></td>
<td>integer</td>
<td>Used to set the variation of the product being added to the cart. <i class="label label-info">optional</i></td>
</tr>
<tr>
<td><code>variation</code></td>
<td>array</td>
<td>Attribute values</td>
</tr>
<tr>
<td><code>cart_item_data</code></td>
<td>array</td>
<td>Used to apply extra cart item data we want to pass with the item. <i class="label label-info">optional</i></td>
</tr>
<tr>
<td><code>return_cart</code></td>
<td>bool</td>
<td>Set as true to return the whole cart once item added. <i class="label label-info">optional</i></td>
</tr>
</tbody></table>
<h3 id='http-request'>HTTP request</h3>
<div class="api-endpoint">
  <div class="endpoint-data">
    <i class="label label-post">POST</i>
    <h6>/wp-json/cocart/v1/add-item</h6>
  </div>
</div>
<pre class="highlight shell tab-shell"><code>curl -X POST https://example.com/wp-json/cocart/v1/add-item <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "product_id": 1722,
    "quantity": 1
  }'</span>
</code></pre>
<blockquote>
<p>JSON response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"404dcc91b2aeaa7caa47487d1483e48a"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"key"</span><span class="p">:</span><span class="s2">"404dcc91b2aeaa7caa47487d1483e48a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product_id"</span><span class="p">:</span><span class="mi">1722</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variation_id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"variation"</span><span class="p">:[],</span><span class="w">
    </span><span class="s2">"quantity"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_tax_data"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"subtotal"</span><span class="p">:[],</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"line_subtotal"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_subtotal_tax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_total"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="s2">"line_tax"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='remove-item-from-cart'>Remove Item from Cart</h2>
<p>This API helps you to remove an item from the cart. You can also request to return the whole cart once item is removed to reduce API requests and use the <a href="#get-cart-contents">Get Cart Content</a> properties. </p>
<h3 id='properties'>Properties</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>cart_item_key</code></td>
<td>string</td>
<td>The cart item key of the product in the cart. <i class="label label-info">mandatory</i></td>
</tr>
<tr>
<td><code>return_cart</code></td>
<td>bool</td>
<td>Set as true to return the whole cart once item added. <i class="label label-info">optional</i></td>
</tr>
</tbody></table>
<h3 id='http-request'>HTTP request</h3>
<div class="api-endpoint">
  <div class="endpoint-data">
    <i class="label label-delete">DELETE</i>
    <h6>/wp-json/cocart/v1/item</h6>
  </div>
</div>
<pre class="highlight shell tab-shell"><code>curl -X DELETE https://example.com/wp-json/cocart/v1/item <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "cart_item_key": 404dcc91b2aeaa7caa47487d1483e48a
  }'</span>
</code></pre>
<blockquote>
<p>JSON response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">"Item has been removed from cart."</span><span class="w">
</span></code></pre><h2 id='restore-item-to-cart'>Restore Item to Cart</h2>
<p>This API helps you to restore an item to the cart. You can also request to return the whole cart once item is restored to reduce API requests and use the <a href="#get-cart-contents">Get Cart Content</a> properties. </p>
<h3 id='properties'>Properties</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>cart_item_key</code></td>
<td>string</td>
<td>The cart item key of the product that was in the cart recently. <i class="label label-info">mandatory</i></td>
</tr>
<tr>
<td><code>return_cart</code></td>
<td>bool</td>
<td>Set as true to return the whole cart once item added. <i class="label label-info">optional</i></td>
</tr>
</tbody></table>
<h3 id='http-request'>HTTP request</h3>
<div class="api-endpoint">
  <div class="endpoint-data">
    <i class="label label-get">GET</i>
    <h6>/wp-json/cocart/v1/item</h6>
    </div>
</div>
<pre class="highlight shell tab-shell"><code>curl -X GET https://example.com/wp-json/cocart/v1/item <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "cart_item_key": 404dcc91b2aeaa7caa47487d1483e48a
  }'</span>
</code></pre>
<blockquote>
<p>JSON response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">"Item has been restored to the cart.""
</span></code></pre><h2 id='update-item-in-cart'>Update Item in Cart</h2>
<p>This API helps you to update an item in the cart. You can also request to return the whole cart once item is updated to reduce API requests and use the <a href="#get-cart-contents">Get Cart Content</a> properties.</p>
<h3 id='properties'>Properties</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>cart_item_key</code></td>
<td>string</td>
<td>The cart item key of the product in the cart you want to update. <i class="label label-info">mandatory</i></td>
</tr>
<tr>
<td><code>quantity</code></td>
<td>integer</td>
<td>Set the quantity of the product you want to update in the cart. <i class="label label-info">Default is 1</i></td>
</tr>
<tr>
<td><code>return_cart</code></td>
<td>bool</td>
<td>Set as true to return the whole cart once item added. <i class="label label-info">optional</i></td>
</tr>
</tbody></table>
<h3 id='http-request'>HTTP request</h3>
<div class="api-endpoint">
  <div class="endpoint-data">
    <i class="label label-post">POST</i>
    <h6>/wp-json/cocart/v1/item</h6>
  </div>
</div>
<pre class="highlight shell tab-shell"><code>curl -X POST https://example.com/wp-json/cocart/v1/item <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "cart_item_key": "404dcc91b2aeaa7caa47487d1483e48a",
    "quantity": 2
  }'</span>
</code></pre>
<blockquote>
<p>JSON response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">"The quantity for 'Woo T-Shirt' has increased to '2'."</span><span class="w">
</span></code></pre><h1 id='hooks'>Hooks</h1>
<p>The cart API has a number of action hooks that you can use to extend the API to your needs.</p>

<p>See the <a href="https://github.com/co-cart/co-cart-tweaks">tweaks plugin for examples</a>.</p>

<aside class="notice">
Please make sure you are viewing the PHP language to view examples of the filters in use.
</aside>
<h3 id='get-cart'>Get Cart</h3>
<p>Perhaps you need to apply something to the whole of the cart before it returns or send a notification. The choice is yours.</p>

<p>Use hook name: <code>cocart_get_cart</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>$cart_contents</code></td>
<td>array</td>
<td>An array of items added to the cart.</td>
</tr>
</tbody></table>
<h3 id='clear-cart'>Clear Cart</h3>
<p>Could be used to send a registered customer an email once they have emptied their cart. 😢</p>

<p>Use hook name: <code>cocart_cart_cleared</code></p>
<h3 id='item-added'>Item Added</h3>
<p>You can do something once an item has been added to the cart.</p>

<p>Use hook name: <code>cocart_item_added_to_cart</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>$item_key</code></td>
<td>string</td>
<td>The cart item key of the product in the cart.</td>
</tr>
<tr>
<td><code>$item_added</code></td>
<td>array</td>
<td>The details of the added item.</td>
</tr>
</tbody></table>
<h3 id='item-removed'>Item Removed</h3>
<p>Use hook name: <code>cocart_item_removed</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>$current_data</code></td>
<td>array</td>
<td>The details of the item removed.</td>
</tr>
</tbody></table>
<h3 id='item-restored'>Item Restored</h3>
<p>Use hook name: <code>cocart_item_restored</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>$current_data</code></td>
<td>array</td>
<td>The details of the item restored.</td>
</tr>
</tbody></table>
<h3 id='item-quantity-changed'>Item Quantity Changed</h3>
<p>Should you need to change some other detail for the updated item.</p>

<p>Use hook name: <code>cocart_item_quantity_changed</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>$cart_item_key</code></td>
<td>string</td>
<td>The cart item key of the product in the cart.</td>
</tr>
<tr>
<td><code>$new_data</code></td>
<td>array</td>
<td>The details of the item updated.</td>
</tr>
</tbody></table>
<h1 id='filters'>Filters</h1>
<p>The cart API has a number of filters that you can use to extend or change the API.</p>

<p>See the <a href="https://github.com/co-cart/co-cart-tweaks">tweaks plugin for more examples</a>.</p>

<aside class="notice">
Please make sure you are viewing the PHP language to view examples of the filters in use.
</aside>
<h3 id='change-thumbnail-size'>Change thumbnail size</h3>
<p>By default the size of the thumbnail uses <code>woocommerce_thumbnail</code>. You can change this by filtering the size using <code>cocart_item_thumbnail_size</code> filter.</p>
<pre class="highlight php tab-php"><code>add_filter( 'cocart_item_thumbnail_size', 'thumbnail_size' );

function thumbnail_size() {
    return 'thumbnail';
}
</code></pre><h3 id='return-more-item-details'>Return more item details</h3>
<p>Sometimes you just need more product data for the items added. You can do so using <code>cocart_cart_contents</code> filter.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>$cart_contents</code></td>
<td>array</td>
<td>An array of items added to the cart.</td>
</tr>
<tr>
<td><code>$item_key</code></td>
<td>string</td>
<td>Unique generated ID for the item in cart.</td>
</tr>
<tr>
<td><code>$cart_item</code></td>
<td>array</td>
<td>An array of details of the item in the cart.</td>
</tr>
<tr>
<td><code>$_product</code></td>
<td>object</td>
<td>The product data of the item.</td>
</tr>
</tbody></table>
<pre class="highlight php tab-php"><code>add_filter( 'cocart_cart_contents', 'return_product_weight', 15, 4 );

function return_product_sku( $cart_contents, $item_key, $cart_item, $_product ) {
    $cart_contents[$item_key]['sku'] = $_product-&gt;get_sku();

    return $cart_contents;
}
</code></pre><h3 id='ok-to-add-item'>OK to add item?</h3>
<p>Want to stop an item being added and return a custom message should it require an item not in the cart first.</p>

<p>Use the <code>cocart_ok_to_add</code> and <code>cocart_ok_to_add_response</code> filters.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>$status</code></td>
<td>bool</td>
<td>The status of adding an item to cart.</td>
</tr>
<tr>
<td><code>$response</code></td>
<td>string</td>
<td>The returned message.</td>
</tr>
<tr>
<td><code>$product_data</code></td>
<td>object</td>
<td>The product data of the item.</td>
</tr>
</tbody></table>
<pre class="highlight php tab-php"><code>add_filter( 'cocart_ok_to_add', 'requires_specific_item', 10, 2 );

function requires_specific_item( $status, $product_data ) {
    $cart_contents = isset( WC()-&gt;cart ) ? WC()-&gt;cart-&gt;get_cart() : WC()-&gt;session-&gt;cart;

    $required_product_id = '123'; // Replace with real product ID number.

    foreach ( $cart_contents as $item_key =&gt; $cart_item ) { 
        // If required product ID does not exist return false.
        if ( $cart_item['id'] != $required_product_id ) {
            $status = false;
        }
    }

    return $status;
}
</code></pre><pre class="highlight php tab-php"><code>add_filter( 'cocart_ok_to_add_message', 'requires_specific_item', 10, 2 );

function requires_specific_item_response( $response, $product_data ) {
    $response = __( 'This item requires a specific item to be added first to the cart.' );

    return $response;
}
</code></pre><h2 id='return-cart-contents'>Return cart contents</h2>
<p>If you are in need to change the formatting of the returned cart data, this filter is for you.</p>

<p>Use the <code>cocart_return_cart_contents</code> filter. In CoCart Pro you can filter the same results for removed cart contents.</p>
<pre class="highlight php tab-php"><code>// Returns the cart contents without the cart item key as the parent array.
add_filter( 'cocart_return_cart_contents', 'remove_parent_cart_item_key', 0 );

function remove_parent_cart_item_key( $cart_contents ) {
    $new_cart_contents = array();

    foreach ( $cart_contents as $item_key =&gt; $cart_item ) {
        $new_cart_contents[] = $cart_item;
    }

    return $new_cart_contents;
}
</code></pre><h1 id='changelog'>Changelog</h1>
<p>The Documentation is updated only when needed. Below is the changelog for &quot;CoCart&quot; documentation that matches with the version of the plugin release.</p>
<h3 id='doc-version-1-plugin-release-v2'>Doc Version 1 - Plugin Release v2</h3>
<ul>
<li>Updated for CoCart v2</li>
</ul>
<h3 id='doc-version-0-5'>Doc Version 0.5</h3>
<ul>
<li>Added attribute table for view cart.</li>
<li>Added missing examples for count items and get cart totals.</li>
</ul>
<h3 id='doc-version-0-4-plugin-release-1-0-5'>Doc Version 0.4 - Plugin Release 1.0.5</h3>
<ul>
<li>Project renamed to CoCart.</li>
<li>Changed support to contribution.</li>
<li>Updated links.</li>
<li>Added Insomnia as another tool you can use to access the API with.</li>
<li>Removed all languages except for cURL showing examples on how to use with official library wrappers due to authentication required whic CoCart does not.</li>
</ul>
<h3 id='doc-version-0-3-plugin-release-1-0-4'>Doc Version 0.3 - Plugin Release 1.0.4</h3>
<ul>
<li>Official libraries are not supported as they require authentication which this API does not.</li>
<li>Removed installation instruction for official libraries.</li>
<li>Replaced logo to prevent confusion with the official REST API documentation.</li>
</ul>
<h3 id='doc-version-0-2-plugin-release-1-0-1'>Doc Version 0.2 - Plugin Release 1.0.1</h3>
<ul>
<li>Updated endpoint for updating, restoring and removing items.</li>
</ul>
<h3 id='doc-version-0-1-plugin-release-1-0-0'>Doc Version 0.1 - Plugin Release 1.0.0</h3>
<ul>
<li>Initial Commit</li>
</ul>
<h1 id='contribute'>Contribute</h1>
<p>If you or your company use CoCart or appreciate the work I’m doing in open source, please consider supporting me directly so I can continue maintaining it and keep evolving the project.</p>

<p>You&#39;ll be helping to ensure I can spend the time not just fixing bugs, adding features, releasing new versions, but also keeping the project afloat. Any contribution you make is a big help and is greatly appreciated.</p>

<p>Please also consider starring ✨ and sharing 👍 the project repo! This helps the project getting known and grow with the community. 🙏</p>

<p>I accept one-time donations and monthly via <a href="https://www.buymeacoffee.com/sebastien">BuyMeACoffee.com</a></p>

<ul>
<li><a href="https://www.paypal.me/codebreaker">My PayPal</a></li>
<li><a href="https://www.buymeacoffee.com/sebastien">BuyMeACoffee.com</a></li>
<li>Bitcoin (BTC): 3L4cU7VJsXBFckstfJdP2moaNhTHzVDkKQ</li>
<li>Ethereum (ETH): 0xc6a3C18cf11f5307bFa11F8BCBD51F355b6431cB</li>
<li>Litecoin (LTC): MNNy3xBK8sM8t1YUA2iAwdi9wRvZp9yRoi</li>
</ul>

<p>If you have special requirements for a sponsorship, you can <a href="mailme@sebastiendumont.com">email me</a> and we can talk.</p>

<p>If you would like to contribute code to this project then please follow these <a href="https://github.com/co-cart/co-cart/blob/master/CONTRIBUTING.md">contribution guidelines</a>.</p>

<p>Thank you for your support! 🙌</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="php">PHP</a>
          </div>
      </div>
    </div>
  </body>
</html>
